<!doctype html>
<meta charset=utf8>   
<meta
      name="viewport"
      content="width=device-width,width=device-height,initial-scale=1,maximum-scale=1"
    />         
<link rel="stylesheet" href="https://unpkg.com/@datavis-tech/codemirror-6-prerelease@5.0.0/codemirror.next/legacy-modes/style/codemirror.css">
<script src="https://unpkg.com/@datavis-tech/codemirror-6-prerelease@5.0.0/dist/codemirror.js"></script>
<style>

  body, html {
    height: 100vh;
    width: 100vw;
    display: flex;
    margin: 0;
  }

  #editor {
    display: flex;
    flex: 1;
  }

  .codemirror {
    flex: 1;
  }
</style>
    
<body>
  <div id=editor ></div>        
  <script>
    let {                       
      EditorState,                 
      EditorView,
      lineNumbers,                 
      indentSelection,             
      legacyMode,
      legacyModes: { javascript },
      matchBrackets,
    } = CodeMirror;

    let mode = legacyMode({mode: javascript({indentUnit: 2}, {})})

    let isMac = /Mac/.test(navigator.platform)
    let state = EditorState.create({doc: `"use strict";
const {readFile} = require("fs");

readFile("package.json", "utf8", (err, data) => {
  console.log(data);           
});`, extensions: [            
      lineNumbers(),
      mode,
      matchBrackets(),
    ]})

    let view = new EditorView({state})
    view.lineWrapping = true;
    document.querySelector("#editor").appendChild(view.dom)

  </script>
</body>
